const userLanguageDropdown=document.querySelector(".dropdown"),translateLanguageDropdown=document.querySelector("#another-language"),mainScreen=document.querySelector(".main-screen"),inputContent=document.querySelector("#validatedInput"),output=document.querySelector("#output"),outputLang=document.querySelector("#output-lang"),valInput=document.querySelector("#initial-input"),runBtnWrap=document.querySelector("#validation-btn-wrap"),btnWrap=document.querySelector("#btn-grp"),modal=document.querySelector(".validation-screen");let firstOption,originalInput,initLang,isError;runBtnWrap.style.display="block",btnWrap.style.display="none";const runBtn=document.querySelector("#validation-btn");runBtn.addEventListener("click",(function(){originalInput=valInput.value,getValidate(valInput.value)}));const acceptBtn=document.querySelector("#accept-btn");acceptBtn.addEventListener("click",(()=>{modal.style.display="none",inputContent.value=valInput.value,mainScreen.style.display="flex",getMessage(firstOption,inputContent.value)}));const keepBtn=document.querySelector("#keep-btn");keepBtn.addEventListener("click",(()=>{modal.style.display="none",inputContent.value=originalInput,mainScreen.style.display="flex",getMessage(firstOption,inputContent.value)}));const retryBtn=document.querySelector("#retry-btn");retryBtn.addEventListener("click",(()=>{valInput.value="",runBtnWrap.style.display="block",btnWrap.style.display="none"}));const newBtn=document.querySelector("#new-input-btn");newBtn.style.display="none",newBtn.addEventListener("click",(()=>{location.reload()})),userLanguageDropdown.addEventListener("change",(function(){firstOption=this.value,console.log("User Language Selected:",firstOption)})),translateLanguageDropdown.addEventListener("change",(function(){firstOption=this.value,console.log("another Language Selected:",firstOption)}));const translateBtn=document.querySelector("#translate-btn");async function getValidate(e){const t=document.querySelector("#spinner-screen1");t.style.display="flex";try{const t=await fetch("https://cypher.leeorburton.com/validate_code.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userinput:e})}),n=await t.json(),o=n.langResponse,a=n.errorResponse,l=n.correctedResponse,s=o.choices[0].message.content,r=a.choices[0].message.content,c=l.choices[0].message.content,i=document.querySelector("#input-lang");"True"===r?(runBtnWrap.style.display="none",btnWrap.style.display="flex",valInput.value=c,i.textContent=s):(modal.style.display="none",inputContent.value=valInput.value,mainScreen.style.display="flex",btnWrap.style.display="flex",i.textContent=s,getMessage(firstOption,inputContent.value))}catch(e){console.log("Error:",e)}finally{t.style.display="none"}}async function getMessage(e,t){const n=document.querySelector("#confirm-img");n.style.display="none";const o=document.querySelector("#spinner-screen2");o.style.display="flex",console.log("translation-clicked");try{const o=await fetch("https://cypher.leeorburton.com/get_message.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstOption:e,userinput:t})}),a=await o.json();output.textContent=a.choices[0].message.content,outputLang.textContent=firstOption,a.choices[0].message.content&&inputContent.value&&(document.createElement("p").textContent=output.value,n.style.display="flex",console.log(output))}catch(e){console.error(e)}finally{o.style.display="none",newBtn.style.display="block"}}translateBtn.addEventListener("click",(()=>{getMessage(firstOption,inputContent.value)}));